import requests
import csv
from DataMining import M_WriteLog as logfile
from DataMining import M_DBIngest as DB_ingest
from datetime import datetime as time
import os


#Konfiguration für Overpass API Abfrage
def osm_querry_config():
    querrys = []
    keywords = []
    with open("M_Miner_OSM/config_miner_source_osm.csv", "r") as configfile:
        userFileReader = csv.DictReader(configfile)

        for query_row in userFileReader:
            #setup querry for overpass api
            osm_id_convert = 3600000000
            city_id = int(query_row['osm_area_id'])
            query_string = '"' + query_row['key_string'] + '"="' + query_row['key_value'] + '"'


            overpass_query = """
                [out:json][timeout:300];
                area(""" + str(osm_id_convert+city_id) + """)->.searchArea;
                (
                node[""" + query_string + """](area.searchArea);
                way[""" + query_string + """](area.searchArea);
                rel[""" + query_string + """](area.searchArea);
                );
                out center;"""

            querrys.append(overpass_query)
            keyword_string = [query_row['country'], query_row['area'], query_row['key_value']]
            keywords.append(keyword_string)
        configfile.close()
        return querrys, keywords

# Overpass abfrage
def osm_querry(query_request):
            overpass_url = "https://overpass-api.de/api/interpreter"
            response = requests.get(overpass_url,params={'data':query_request})

            query_timestamp = str(time.now())  # add to log file
            if response.status_code == 200:
                query_results = response.json()

                # processing for ingest

                query_source = query_results['generator']
                query_data_len = len(query_results['elements']) # add to log file
                query_data = query_results['elements']

                #create log flag
                log_type = "success"


                return [query_timestamp, query_source, query_data_len, query_data, log_type]
            elif response.status_code != 200:

                # creat log flag for error
                log_type = "err"

                return [query_timestamp, "empty", "empty", "none", log_type]


def run_miner_OSM():
    #get querry aka querry config from config_miner_source_osm
    # query_input sind die die in dem für die OSM Overpass API Abfrage notwendigen Daten Strin
    # query_keywords sind nur die Keywords

    query_input, query_keywords = osm_querry_config()

    # Starten der API Abfrage für die einzelnen Keywords bzw. Query_Inputs aus der Config Datei
    # Query Loop (je Keyword) und Ingest in die DB über M_gen_DB_ingest
    # for i in range(len(query_input)):
    for i in range (len(query_input)):
        query_feedback = []
        query_feedback = osm_querry(query_input[i])

        """
        query_feedback = ['2018-08-05 17:03:44.435198', 'Overpass API 0.7.55.4 3079d8ea', 129, [{'type': 'node', 'id': 118252923, 'lat': 48.149801, 'lon': 11.5855374, 'tags': {'addr:city': 'München', 'addr:housenumber': '6', 'addr:postcode': '80539', 'addr:street': 'Königinstraße', 'amenity': 'biergarten', 'contact:email': 'info@milchhaeusl.de', 'contact:fax': '+49 89 517297199', 'contact:phone': '+49 89 517297180', 'name': 'Milchhäusl', 'note': 'open in winter', 'opening_hours': 'Mo-Su 10:00-22:00', 'organic': 'only', 'source': 'survey by BenE München', 'toilets:wheelchair': 'no', 'website': 'http://www.milchhaeusl.de', 'wheelchair': 'limited'}}, {'type': 'node', 'id': 196216198, 'lat': 48.1329449, 'lon': 11.5890485, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '4', 'addr:postcode': '81667', 'addr:street': 'Zellstraße', 'amenity': 'biergarten', 'brewery': 'Hofbräu München', 'capacity': '300', 'contact:phone': '+49 89 458 750 10', 'contact:website': 'http://www.muffathalle.de/Gastronomie/Biergarten.html', 'name': 'Biergarten an der Muffathalle', 'note': 'Öko-Betrieb', 'opening_hours': 'Mo-Th 17:00+; Fr-Su 12:00+', 'organic': 'only', 'source': 'survey by BenE München', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 263834092, 'lat': 48.1283984, 'lon': 11.6015507, 'tags': {'addr:city': 'München', 'addr:housenumber': '39', 'addr:postcode': '81667', 'addr:street': 'Weißenburger Straße', 'contact:phone': '+49 89 61456630', 'name': 'Biometzgerei Pichler', 'old_name': 'Schäbitz', 'opening_hours': 'Mo-Fr 08:00-19:00; Sa 08:00-16:00', 'organic': 'only', 'shop': 'butcher', 'wheelchair': 'no'}}, {'type': 'node', 'id': 263882439, 'lat': 48.1283751, 'lon': 11.5978309, 'tags': {'name': 'Alnatura', 'note': 'organic supermarket', 'organic': 'only', 'shop': 'supermarket', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 266698106, 'lat': 48.1349508, 'lon': 11.5981682, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '1', 'addr:postcode': '81675', 'addr:street': 'Kirchenstraße', 'name': 'VollCorner Bio', 'opening_hours': 'Mo-Sa 08:00-20:00', 'organic': 'only', 'shop': 'deli', 'website': 'http://www.vollcorner.de', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 266698132, 'lat': 48.1342594, 'lon': 11.5971612, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '52', 'addr:postcode': '81667', 'addr:street': 'Innere Wiener Straße', 'identity': 'permaculture', 'interaction': 'buying_and_selling', 'name': 'Vollcorner', 'old_name': 'Reformhaus Vitalia', 'old_name_1': 'Grüner Markt', 'opening_hours': 'Mo-Sa 08:00-20:00', 'organic': 'only', 'phone': '+49 89 666 16 798', 'provides': 'food+drink', 'shop': 'supermarket', 'website': 'http://www.vollcorner.de/biomarkt-filialen-muenchen/haidhausen/innere-wiener-strasse-52/', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 271505645, 'lat': 48.1217871, 'lon': 11.5405426, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housename': 'im Stemmerhof', 'addr:housenumber': '6', 'addr:postcode': '81369', 'addr:street': 'Plinganserstraße', 'name': 'Biomarkt', 'opening_hours': 'Mo-Fr 08:00-20:00; Sa 08:00-16:00', 'organic': 'only', 'shop': 'supermarket', 'wheelchair': 'limited'}}, {'type': 'node', 'id': 272659099, 'lat': 48.1257977, 'lon': 11.5504061, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '80', 'addr:postcode': '80337', 'addr:street': 'Lindwurmstraße', 'name': 'VollCorner', 'opening_hours': 'Mo-Sa 08:00-20:00; PH off', 'operator': 'VollCorner Biomarkt GmbH', 'organic': 'only', 'phone': '+49 89 41228872', 'shop': 'supermarket', 'website': 'http://www.vollcorner.de/', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 275064980, 'lat': 48.1287056, 'lon': 11.5949938, 'tags': {'name': 'VollCorner', 'opening_hours': 'Mo-Sa 08:00-20:00', 'organic': 'only', 'shop': 'supermarket', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 283154361, 'lat': 48.1460625, 'lon': 11.637707, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '1', 'addr:postcode': '81927', 'addr:street': 'Warthestraße', 'name': 'VollCorner Bio', 'opening_hours': 'Mo-Fr 08:00-20:00; Sa 08:00-18:00', 'operator': 'VollCorner Biomarkt GmbH; Birgit Neumann und Willi Pfaff', 'organic': 'only', 'shop': 'supermarket', 'website': 'http://www.vollcorner.de', 'wheelchair': 'no'}}, {'type': 'node', 'id': 291898667, 'lat': 48.1466333, 'lon': 11.59347, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '10', 'addr:postcode': '80538', 'addr:street': 'Lerchenfeldstraße', 'name': 'Bioparadies Markt', 'organic': 'only', 'phone': '+49 89 23547870', 'shop': 'supermarket', 'website': 'http://www.bioparadies.net', 'wheelchair': 'limited'}}, {'type': 'node', 'id': 334250933, 'lat': 48.1303078, 'lon': 11.6038755, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '12', 'addr:postcode': '81667', 'addr:street': 'Breisacher Straße', 'description': 'Neighbourhood grocery store with liquorice shop-in-shop', 'name': 'Lebascha Naturkost', 'note': 'Der älteste und schönste Naturkostladen in München', 'opening_hours': 'Mo-Fr 09:00-19:00; Sa 09:00-14:00', 'organic': 'only', 'shop': 'convenience', 'wheelchair': 'no'}}, {'type': 'node', 'id': 338749155, 'lat': 48.1528681, 'lon': 11.620253, 'tags': {'name': 'Gailus Reformhaus', 'organic': 'only', 'shop': 'supermarket', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 344498798, 'lat': 48.150636, 'lon': 11.6081572, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '2', 'addr:postcode': '81679', 'addr:street': 'Herkomerplatz', 'contact:phone': '+49 89 98247393', 'contact:website': 'http://www.biovolet.de/', 'name': 'BioVolet', 'opening_hours': 'Mo-Fr 07:30-20:00; Sa 07:30-18:00', 'organic': 'only', 'phone': '+49 89 98247393', 'shop': 'supermarket'}}, {'type': 'node', 'id': 387809260, 'lat': 48.1622175, 'lon': 11.5847859, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '6', 'addr:postcode': '80803', 'addr:street': 'Herzogstraße', 'contact:phone': '+49 89 761021 \u200e', 'contact:website': 'brotraum.de', 'name': 'Brotraum', 'opening_hours': 'Mo-Fr 07:00-18:00; Sa 07:00-14:00', 'organic': 'only', 'shop': 'bakery', 'source': 'survey by BenE München', 'wheelchair': 'limited', 'wheelchair:description': 'Stufe'}}, {'type': 'node', 'id': 392854555, 'lat': 48.1017326, 'lon': 11.6281095, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '133', 'addr:postcode': '81737', 'addr:street': 'Ottobrunner Straße', 'addr:suburb': 'Perlach', 'name': 'Mohrhof Perlach', 'opening_hours': 'Mo-Fr 08:00-20:00; Sa 08:00-20:00', 'operator': 'Naturkost GmbH', 'organic': 'only', 'phone': '+49 89 6300 5732', 'shop': 'supermarket', 'url': 'http://mohrhof-perlach.de/', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 409497639, 'lat': 48.1269442, 'lon': 11.5672195, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '49', 'addr:postcode': '80469', 'addr:street': 'Holzstraße', 'name': 'Schmatz Biomarkt', 'opening_hours': 'Mo-Sa 09:00-20:00', 'organic': 'only', 'phone': '+49 89 5328063', 'shop': 'supermarket', 'website': 'http://www.schmatz-naturkost.de/', 'wheelchair': 'limited'}}, {'type': 'node', 'id': 415003259, 'lat': 48.1649937, 'lon': 11.4615835, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '130', 'addr:postcode': '81247', 'addr:street': 'Verdistraße', 'name': "denn's Biomarkt", 'opening_hours': 'Mo-Sa 08:00-20:00', 'organic': 'only', 'shop': 'supermarket', 'source': 'Yahoo Aerial Image and local knowledge', 'website': 'https://www.denns-biomarkt.de/muenchen-verdistr-130/marktseite/'}}, {'type': 'node', 'id': 416452785, 'lat': 48.1569469, 'lon': 11.5743668, 'tags': {'lastcheck': '2017-03-27', 'name': 'Herrmannsdorfer Landwerkstätten', 'opening_hours': 'Mo-Fr 09:00-18:30; Sa 08:30-13:30', 'organic': 'only', 'shop': 'butcher', 'website': 'http://www.herrmannsdorfer.de/wo-sie-uns-finden/die-geschaefte/', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 416452790, 'lat': 48.1568857, 'lon': 11.5749314, 'tags': {'name': 'Schwabinger Saftladen', 'organic': 'only', 'shop': 'supermarket'}}, {'type': 'node', 'id': 418589823, 'lat': 48.1562534, 'lon': 11.5711832, 'tags': {'addr:city': 'München', 'addr:housenumber': '67', 'addr:postcode': '80799', 'addr:street': 'Georgenstraße', 'amenity': 'restaurant', 'capacity': '50', 'cuisine': 'regional', 'diaper': 'no', 'diet:vegan': 'yes', 'diet:vegetarian': 'only', 'name': 'Cafe Ignaz', 'opening_hours': 'Mo, We-Fr 11:00-22:00; Sa, Su, PH 08:00-22:00; tu off || "nach Vereinbarung"', 'organic': 'only', 'payment:girocard': 'yes', 'vegetarian': 'only', 'website': 'http://www.ignaz-cafe.de', 'wheelchair': 'no', 'wheelchair:description': 'Stufe — Tische im Gehwegbereich erreichbar'}}, {'type': 'node', 'id': 433909623, 'lat': 48.1632953, 'lon': 11.5645366, 'tags': {'amenity': 'restaurant', 'name': 'Basic', 'organic': 'only', 'wheelchair': 'limited'}}, {'type': 'node', 'id': 433909625, 'lat': 48.1625843, 'lon': 11.5642385, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '158', 'addr:postcode': '80797', 'addr:street': 'Schleißheimer Straße', 'name': 'Basic', 'opening_hours': 'Mo-Sa 08:00-20:00', 'organic': 'only', 'shop': 'convenience', 'wheelchair': 'limited'}}, {'type': 'node', 'id': 471620045, 'lat': 48.1502267, 'lon': 11.5729258, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '54-56', 'addr:postcode': '80799', 'addr:street': 'Barer Straße', 'email': 'info@landmanns-biomarkt.com', 'fax': '+49 89 28787880', 'name': 'Landmanns Biomarkt', 'opening_hours': 'Mo-Fr 09:00-20:00; Sa 09:00-16:00; PH off', 'operator': 'Landmanns Biomarkt München GmbH und Co. KG', 'organic': 'only', 'phone': '+49 89 28787870', 'shop': 'supermarket', 'website': 'http://landmanns-muenchen.de', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 567219288, 'lat': 48.1475007, 'lon': 11.4615268, 'tags': {'check_date': '2018-05-11', 'name': 'Herrmannsdorfer Landwerkstätten', 'opening_hours': 'Mo-Fr 08:00-18:00; Sa 08:00-13:30', 'organic': 'only', 'phone': '+49 89 8211378', 'shop': 'convenience', 'website': 'http://www.herrmannsdorfer.de/wo-sie-uns-finden/die-geschaefte/', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 573763515, 'lat': 48.1098061, 'lon': 11.5748319, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '10', 'addr:postcode': '81547', 'addr:street': 'Grünwalder Straße', 'name': 'Hofpfisterei', 'note': 'auf der Homepage steht als Tel.Nr +49 89 6970048', 'opening_hours': 'Mo-Fr 07:15-18:00; Sa 07:15-13:00', 'operator': 'Ludwig Stocker Hofpfisterei GmbH', 'organic': 'only', 'phone': '+49 89 645973', 'shop': 'bakery', 'website': 'http://www.hofpfisterei.de', 'wheelchair': 'limited'}}, {'type': 'node', 'id': 606975015, 'lat': 48.1595091, 'lon': 11.5441185, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '9b', 'addr:postcode': '80637', 'addr:street': 'Dom-Pedro-Straße', 'contact:email': 'info@vollcorner.de', 'contact:phone': '+49 89 12738480', 'contact:website': 'http://www.vollcorner.de', 'name': 'VollCorner Bio', 'opening_hours': 'Mo-Sa 08:00-20:00', 'operator': 'VollCorner Biomarkt GmbH; Birgit Neumann und Willi Pfaff', 'organic': 'only', 'shop': 'supermarket', 'wheelchair': 'limited', 'wheelchair:description': '1 Stufe Eingang Kasse gegü für Hilfe, aktuell (2016-06) mit Metal-Rampe'}}, {'type': 'node', 'id': 659037305, 'lat': 48.1351693, 'lon': 11.5794055, 'tags': {'addr:city': 'München', 'addr:housenumber': '35', 'addr:postcode': '80331', 'addr:street': 'Westenriederstraße', 'name': 'basic - bio für alle', 'opening_hours': 'Mo-Sa 08:00-20:00', 'operator': 'basic AG Lebensmittelhandel', 'organic': 'only', 'phone': '+49 89 2420890', 'shop': 'supermarket', 'website': 'http://www.basicbio.de', 'wheelchair': 'limited', 'wheelchair:description': 'Der Zugang zum Bistro im 1. Stock erfolgt mittels eines winzigen Aufzugs. Nur für Aktivrollis tauglich.'}}, {'type': 'node', 'id': 677214312, 'lat': 48.1147204, 'lon': 11.4814676, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '95', 'addr:postcode': '81375', 'addr:street': 'Würmtalstraße', 'currency:EUR': 'yes', 'currency:others': 'no', 'diet:gluten_free': 'yes', 'diet:vegan': 'yes', 'name': 'VollCorner Bio', 'opening_hours': 'Mo-Sa 08:00-20:00; PH off', 'operator': 'VollCorner Biomarkt GmbH;Birgit Neumann und Willi Pfaff', 'organic': 'only', 'payment:girocard': 'yes', 'shop': 'supermarket', 'website': 'http://www.vollcorner.de', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 692187605, 'lat': 48.1500585, 'lon': 11.5469772, 'tags': {'addr:housenumber': '82', 'addr:postcode': '80636', 'addr:street': 'Nymphenburger Straße', 'name': 'Basic (Bio)', 'opening_hours': 'Mo-Sa 08:00-20:00', 'organic': 'only', 'shop': 'supermarket', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 699621809, 'lat': 48.1285302, 'lon': 11.5948087, 'tags': {'name': 'Hofpfisterei', 'organic': 'only', 'shop': 'bakery', 'wheelchair': 'no'}}, {'type': 'node', 'id': 701376183, 'lat': 48.1414394, 'lon': 11.5591205, 'tags': {'name': 'Reformhaus Gross', 'opening_hours': 'Mo-Fr 07:00-20:00; Sa 10:00-20:00; Su 12:00-16:00', 'organic': 'only', 'shop': 'supermarket'}}, {'type': 'node', 'id': 703392472, 'lat': 48.1353926, 'lon': 11.5748113, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '7', 'addr:postcode': '80331', 'addr:street': 'Rosental', 'contact:website': 'http://www.vitalia-reformhaus.de', 'name': 'Vitalia', 'opening_hours': 'Mo-Sa 08:00-20:00', 'operator': 'VITALIA GmbH', 'organic': 'only', 'phone': '+49 89 2603145', 'shop': 'convenience', 'wheelchair': 'limited'}}, {'type': 'node', 'id': 703979494, 'lat': 48.1348155, 'lon': 11.5759717, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': 'Stand 33', 'addr:postcode': '80331', 'addr:street': 'Viktualienmarkt', 'contact:phone': '+49 89 26 46 56', 'name': 'Beim Trübenecker', 'organic': 'only', 'shop': 'supermarket', 'toilets:wheelchair': 'no', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 705043566, 'lat': 48.1344678, 'lon': 11.5753668, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '1', 'addr:postcode': '80331', 'addr:street': 'Blumenstraße', 'name': 'Hofpfisterei Restbrotladen', 'organic': 'only', 'shop': 'bakery', 'wheelchair': 'no'}}, {'type': 'node', 'id': 722338120, 'lat': 48.081285, 'lon': 11.527965, 'tags': {'addr:city': 'München', 'addr:housenumber': '24', 'addr:postcode': '81479', 'addr:street': 'Friedastraße', 'name': 'Reformhaus Sander', 'opening_hours': 'Mo-Fr 09:00-18:00, Sa 09:00-13:00', 'operator': 'Tino & Sander Haltmaier', 'organic': 'only', 'phone': '089 / 794253', 'shop': 'supermarket', 'wheelchair': 'limited'}}, {'type': 'node', 'id': 792641663, 'lat': 48.1610881, 'lon': 11.5238709, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '17', 'addr:postcode': '80638', 'addr:street': 'Gerner Straße', 'fax': '+49 89 1598 0295', 'name': 'Gerner Bio-Markt', 'organic': 'only', 'phone': '+49 89 1598 0294', 'shop': 'supermarket'}}, {'type': 'node', 'id': 872623850, 'lat': 48.1414129, 'lon': 11.6155101, 'tags': {'addr:city': 'München', 'addr:housenumber': '48', 'addr:street': 'Richard-Strauss-Straße', 'name': 'Basic', 'opening_hours': 'Mo-Sa 08:00-20:00', 'organic': 'only', 'shop': 'supermarket', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 981232932, 'lat': 48.1297033, 'lon': 11.5730509, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '53', 'addr:street': 'Klenzestraße', 'amenity': 'cafe', 'contact:email': 'kontakt@tushita.eu', 'contact:facebook': 'www.facebook.com/tushita.eu', 'diet:gluten_free': 'yes', 'diet:vegan': 'yes', 'diet:vegetarian': 'only', 'internet_access': 'wlan', 'name': 'Tushita Teehaus', 'opening_hours': 'Mo-Fr 09:00-20:00; Sa 10:00-20:00', 'organic': 'only', 'phone': '+49 89 189 755 94', 'smoking': 'no', 'source': 'survey by BenE München', 'website': 'http://www.tushita.eu/', 'wheelchair': 'limited'}}, {'type': 'node', 'id': 1082909013, 'lat': 48.1139988, 'lon': 11.5718769, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '58', 'addr:postcode': '81543', 'addr:street': 'Pilgersheimer Straße', 'name': 'Alles Gute Naturkost', 'opening_hours': 'Mo-Fr 09:00-13:00,15:00-18:30; Sa 09:00-13:30', 'operator': 'Helmut Laschitz', 'organic': 'only', 'phone': '+49 89 65 40 79', 'shop': 'organic', 'wheelchair': 'limited'}}, {'type': 'node', 'id': 1126961013, 'lat': 48.1166004, 'lon': 11.5807939, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '48', 'addr:postcode': '81541', 'addr:street': 'Tegernseer Landstraße', 'name': 'Hofpfisterei', 'organic': 'only', 'shop': 'bakery', 'wheelchair': 'no'}}, {'type': 'node', 'id': 1209031852, 'lat': 48.1300937, 'lon': 11.5670911, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '28', 'addr:postcode': '80469', 'addr:street': 'Pestalozzistraße', 'amenity': 'cafe', 'contact:fax': '+49 89 54892328', 'contact:phone': '+49 89 54892327', 'diaper': 'no', 'email': 'info@cafelamar.de', 'highchair': 'yes', 'internet_access': 'yes', 'internet_access:fee': 'no', 'internet_access:type': 'wlan', 'name': "L'Amar", 'official_name': "L'Amar Organic Café Restaurant", 'opening_hours': 'Mo-Sa 09:00-23:00; Su,PH 10:00-23:00', 'operator': 'greenlotus GmbH & Co. KG', 'organic': 'only', 'payment:cash': 'yes', 'payment:electronic_purses': 'yes', 'source': 'survey by BenE München', 'toilets': 'yes', 'toilets:wheelchair': 'no', 'website': 'http://www.cafelamar.de', 'wheelchair': 'limited'}}, {'type': 'node', 'id': 1239779622, 'lat': 48.1149301, 'lon': 11.5696695, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '16', 'addr:postcode': '81543', 'addr:street': 'Konradinstraße', 'name': 'Hofpfisterei', 'opening_hours': 'Mo-Th 07:30-13:00,14:00-18:00; Fr 07:30-18:00; Sa 07:30-12:30', 'organic': 'only', 'shop': 'bakery', 'source': 'local knowledge', 'website': 'www.hofpfisterei.de', 'wheelchair': 'limited'}}, {'type': 'node', 'id': 1260272209, 'lat': 48.1624978, 'lon': 11.5221927, 'tags': {'name': 'Gut & Gern', 'organic': 'only', 'shop': 'supermarket'}}, {'type': 'node', 'id': 1279098727, 'lat': 48.1454967, 'lon': 11.4590349, 'tags': {'check_date': '2018-05-10', 'contact:phone': '+49 89 82075794', 'contact:website': 'http://www.erdgarten-biosupermarkt.de/', 'name': 'Erdgarten', 'opening_hours': 'Mo-Fr 08:30-19:00; Sa 08:30-14:00', 'organic': 'only', 'shop': 'supermarket', 'wheelchair': 'limited'}}, {'type': 'node', 'id': 1321090411, 'lat': 48.126749, 'lon': 11.594798, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '16', 'addr:postcode': '81669', 'addr:street': 'Balanstraße', 'amenity': 'restaurant', 'brewery': 'Löwenbräu', 'contact:email': 'post@klinglwirt.de', 'contact:fax': '+49 8985676200', 'cuisine': 'bavarian', 'name': 'Klinglwirt', 'old_name': 'Rila', 'opening_hours': 'Mo-Su 11:00-01:00', 'organic': 'only', 'phone': '+49 89 85676199', 'source': 'survey by BenE München', 'website': 'http://www.klinglwirt.de/', 'wheelchair': 'no'}}, {'type': 'node', 'id': 1335980437, 'lat': 48.1594664, 'lon': 11.5688938, 'tags': {'addr:housenumber': '31', 'addr:street': 'Tengstraße', 'name': 'echt.bio markt', 'opening_hours': 'Mo-Fr 08:00-19:00; Sa 08:00-14:30', 'operator': 'Maria Sonnenschmidt', 'organic': 'only', 'shop': 'supermarket', 'wheelchair': 'limited', 'wheelchair:description': 'Aber relativ eng drin'}}, {'type': 'node', 'id': 1347109333, 'lat': 48.130528, 'lon': 11.6039047, 'tags': {'check_date': '2018-07-24', 'contact:website': 'http://bäckerei-gürtner.de/', 'name': 'Gürtner', 'opening_hours': 'Mo-Fr 07:00-18:00; Sa 07:00-13:00; PH off', 'organic': 'only', 'shop': 'bakery', 'wheelchair': 'no', 'wheelchair:description': 'Hohe Eingangsstufe.'}}, {'type': 'node', 'id': 1350023965, 'lat': 48.1353706, 'lon': 11.5976291, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '2', 'addr:street': 'Max-Weber-Platz', 'name': 'Herrmannsdorfer Landwerkstätten', 'opening_hours': 'Mo-Fr 08:00-18:30; Sa 08:00-13:00', 'organic': 'only', 'phone': '+49 89 4899 7305', 'shop': 'butcher', 'type': 'organic', 'website': 'http://www.herrmannsdorfer.de/wo-sie-uns-finden/die-geschaefte/', 'wheelchair': 'no'}}, {'type': 'node', 'id': 1382124611, 'lat': 48.126761, 'lon': 11.59355, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '38', 'addr:postcode': '81669', 'addr:street': 'Rablstraße', 'name': 'Fritz Mühlenbäckerei', 'opening_hours': 'Mo-Fr 07:00-19:00; Sa 07:30-13:00', 'organic': 'only', 'shop': 'bakery', 'website': 'http://www.fritz-muehlenbaeckerei.de/', 'wheelchair': 'limited'}}, {'type': 'node', 'id': 1404748646, 'lat': 48.1626815, 'lon': 11.5865998, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '7', 'addr:postcode': '80802', 'addr:street': 'Münchner Freiheit', 'level': '-1', 'name': 'ALNATURA', 'opening_hours': 'Mo-Sa 08:00-20:00', 'organic': 'only', 'phone': '+49 89 37910444', 'shop': 'supermarket', 'wheelchair': 'yes', 'wheelchair:description': 'Nordausgang Untergeschoss'}}, {'type': 'node', 'id': 1528259309, 'lat': 48.1380199, 'lon': 11.5026092, 'tags': {'addr:city': 'München', 'addr:housenumber': '40', 'addr:postcode': '80686', 'addr:street': 'Fürstenrieder Straße', 'name': 'Biomarkt Grüner Zweig', 'opening_hours': 'Mo-Fr 09:00-19:00, Sa 08:30-14:00', 'organic': 'only', 'shop': 'supermarket', 'source': 'http://www.muenchen.de/shopping/orte/51964.html', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 1558156483, 'lat': 48.1167191, 'lon': 11.581378, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '41', 'addr:postcode': '81541', 'addr:street': 'Tegernseer Landstraße', 'name': 'VollCorner Bio', 'opening_hours': 'Mo-Sa 08:00-20:00', 'operator': 'VollCorner Biomarkt GmbH;Birgit Neumann und Willi Pfaff', 'organic': 'only', 'shop': 'supermarket', 'website': 'http://www.vollcorner.de', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 1582404449, 'lat': 48.0957139, 'lon': 11.4964437, 'tags': {'name': 'Vitalia Reformhaus', 'organic': 'only', 'shop': 'supermarket'}}, {'type': 'node', 'id': 1609203944, 'lat': 48.1348654, 'lon': 11.5398519, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '38', 'addr:postcode': '80339', 'addr:street': 'Kazmairstraße', 'contact:google_plus': 'https://plus.google.com/106856727881841097498', 'name': 'Nicos Naturkost', 'opening_hours': 'Mo-Fr 09:00-18:00; Sa 09:00-13:00', 'organic': 'only', 'shop': 'convenience'}}, {'type': 'node', 'id': 1659326795, 'lat': 48.1127142, 'lon': 11.70187, 'tags': {'addr:housenumber': '214', 'addr:postcode': '81827', 'addr:street': 'Wasserburger Landstraße', 'name': "denn's Biomarkt", 'opening_hours': 'Mo-Sa 08:00-20:00', 'organic': 'only', 'shop': 'supermarket', 'source': 'survey', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 1725815497, 'lat': 48.1253082, 'lon': 11.5799128, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '19', 'addr:postcode': '81541', 'addr:street': 'Ohlmüllerstraße', 'name': 'Auryn Naturkost', 'opening_hours': 'Mo-Fr 08:30-20:00; Sa 08:30-15:00', 'organic': 'only', 'shop': 'convenience', 'wheelchair': 'no'}}, {'type': 'node', 'id': 1765557373, 'lat': 48.1000673, 'lon': 11.5279942, 'tags': {'addr:housenumber': '72', 'addr:postcode': '81379', 'addr:street': 'Boschetsrieder Straße', 'level': '0', 'name': 'Alnatura Bio Super Natur Markt', 'opening_hours': 'Mo-Sa 08:00-20:00', 'organic': 'only', 'shop': 'supermarket', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 1813636683, 'lat': 48.1493892, 'lon': 11.5629019, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '55', 'addr:postcode': '80333', 'addr:street': 'Augustenstraße', 'name': 'VollCorner Bio', 'opening_hours': 'Mo-Sa 08:00-20:00', 'operator': 'VollCorner Biomarkt GmbH;Birgit Neumann und Willi Pfaff', 'organic': 'only', 'shop': 'supermarket', 'website': 'http://www.vollcorner.de', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 1834209751, 'lat': 48.1347644, 'lon': 11.5418504, 'tags': {'addr:city': 'München', 'addr:housenumber': '26', 'addr:postcode': '80339', 'addr:street': 'Kazmairstraße', 'name': 'VollCorner Bio', 'opening_hours': 'Mo-Sa 08:00-20:00', 'operator': 'VollCorner Biomarkt GmbH; Birgit Neumann und Willi Pfaff', 'organic': 'only', 'shop': 'supermarket', 'toilets:wheelchair': 'no', 'website': 'http://www.vollcorner.de', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 2091317987, 'lat': 48.0939421, 'lon': 11.4982174, 'tags': {'addr:city': 'München', 'addr:housenumber': '63', 'addr:postcode': '81476', 'addr:street': 'Forstenrieder Allee', 'name': 'Hofpfisterei', 'opening_hours': 'Mo-Fr 07:30-18:00; Sa 07:00-13:00; PH off', 'organic': 'only', 'payment:cash': 'yes', 'phone': '+49 89 7592686', 'shop': 'bakery', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 2144852063, 'lat': 48.0783823, 'lon': 11.5088446, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '46', 'addr:street': 'Schuchstraße', 'entrance': 'yes', 'facebook': 'https://www.facebook.com/biowelt.schlessmann', 'name': 'Biowelt Schlessmann', 'opening_hours': 'Mo-Fr 08:30-19:00; Sa 08:00-19:00', 'organic': 'only', 'outdoor_seating': 'yes', 'phone': '+49 89 74419451', 'shop': 'supermarket', 'takeaway': 'yes'}}, {'type': 'node', 'id': 2246397186, 'lat': 48.1815321, 'lon': 11.552812, 'tags': {'addr:housenumber': '19', 'addr:street': 'Helene-Mayer-Ring', 'name': 'Bioinsel', 'opening_hours': 'Mo-Fr 09:00-19:30; Sa 09:00-17:00', 'operator': 'K. Matthes', 'organic': 'only', 'phone': '+49 17694301691', 'shop': 'supermarket', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 2262735732, 'lat': 48.1432375, 'lon': 11.5563422, 'tags': {'addr:housename': 'Neue Hopfenpost', 'addr:housenumber': '5', 'addr:postcode': '80335', 'addr:street': 'Seidlstraße', 'contact:fax': '+49 89 54544866', 'contact:phone': '+49 89 54544865', 'name': "denn's Biomarkt", 'opening_hours': 'Mo-Sa 08:00-20:00; Su,PH off', 'operator': "denn's Biomarkt GmbH", 'organic': 'only', 'shop': 'supermarket', 'website': 'http://www.denns-biomarkt.de/18861_Muenchen_Neue_Hopfenpost.html', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 2282298081, 'lat': 48.1363515, 'lon': 11.5713783, 'tags': {'addr:city': 'München', 'addr:housenumber': '12a', 'addr:postcode': '80331', 'addr:street': 'Sendlinger Straße', 'contact:phone': '+49 89 21269391', 'contact:website': 'http://www.denns-biomarkt.de', 'fixme': 'Position/Verlauf grob geschätzt', 'level': '-1', 'name': "denn's Biomarkt", 'opening_hours': 'Mo-Sa 09:00-20:00', 'operator': "denn's Biomarkt GmbH", 'organic': 'only', 'shop': 'supermarket', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 2381626163, 'lat': 48.1064233, 'lon': 11.644765, 'tags': {'addr:housenumber': '78', 'addr:postcode': '81735', 'addr:street': 'Albert-Schweitzer-Straße', 'level': '0', 'name': 'Alnatura Bio-Supermarkt', 'opening_hours': 'Mo-Sa 08:00-20:00; PH off', 'organic': 'only', 'phone': '+49 89 63799715', 'shop': 'supermarket', 'toilets:wheelchair': 'no', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 2494957079, 'lat': 48.0816642, 'lon': 11.529145, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '204', 'addr:postcode': '81479', 'addr:street': 'Wolfratshauser Straße', 'name': 'VollCorner Bio', 'opening_hours': 'Mo-Sa 08:00-20:00', 'operator': 'VollCorner Biomarkt GmbH; Birgit Neumann und Willi Pfaff', 'organic': 'only', 'shop': 'supermarket', 'website': 'http://www.vollcorner.de', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 2494957080, 'lat': 48.0866851, 'lon': 11.477951, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '17', 'addr:postcode': '81475', 'addr:street': 'Maxhofstraße', 'email': 'info@vollcorner.de', 'name': 'VollCorner Bio', 'opening_hours': 'Mo-Fr 08:00-20:00; Sa 08:00-18:00; PH off', 'operator': 'VollCorner Biomarkt GmbH;Birgit Neumann und Willi Pfaff', 'organic': 'only', 'phone': '+49 89 74500136', 'shop': 'supermarket', 'website': 'http://www.vollcorner.de', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 2494957081, 'lat': 48.1465573, 'lon': 11.5344821, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '134', 'addr:postcode': '80634', 'addr:street': 'Arnulfstraße', 'name': 'VollCorner Bio', 'opening_hours': 'Mo-Sa 08:00-20:00', 'operator': 'VollCorner Biomarkt GmbH; Birgit Neumann und Willi Pfaff', 'organic': 'only', 'shop': 'supermarket', 'website': 'http://www.vollcorner.de', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 2510728065, 'lat': 48.0898097, 'lon': 11.4804924, 'tags': {'name': 'Vitalia', 'organic': 'only', 'shop': 'convenience'}}, {'type': 'node', 'id': 2579589165, 'lat': 48.1458268, 'lon': 11.5196532, 'tags': {'name': 'Alnatura', 'organic': 'only', 'shop': 'supermarket', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 2693069575, 'lat': 48.1392918, 'lon': 11.5036191, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '73', 'addr:postcode': '80687', 'addr:street': 'Agnes-Bernauer-Straße', 'name': 'Biomarkt Basic', 'opening_hours': 'Mo-Sa 08:00-20:00', 'operator': 'Basic', 'organic': 'only', 'shop': 'supermarket', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 2698583754, 'lat': 48.1523484, 'lon': 11.5088329, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '20', 'addr:postcode': '80639', 'addr:street': 'Hirschgartenallee', 'name': 'Nymphenburger Natur- & Feinkostladen', 'opening_hours': 'Sa 08:30-13:00; Mo-Fr 15:00-18:30,08:30-13:30', 'organic': 'only', 'shop': 'convenience', 'wheelchair': 'no'}}, {'type': 'node', 'id': 2714909279, 'lat': 48.152851, 'lon': 11.5344015, 'tags': {'addr:city': 'München', 'addr:housenumber': '158', 'addr:postcode': '80634', 'addr:street': 'Nymphenburger Straße', 'name': 'Alnatura Super Natur Markt', 'operator': 'Alnatura', 'organic': 'only', 'shop': 'supermarket', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 2727465948, 'lat': 48.1601612, 'lon': 11.5492583, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '2', 'addr:postcode': '80637', 'addr:street': 'Schwere-Reiter-Straße', 'garden:type': 'community', 'identity': 'subsistence_economy', 'interaction': 'cousing', 'leisure': 'garden', 'name': 'Grün in Sicht', 'organic': 'only', 'provides': 'food+drink'}}, {'type': 'node', 'id': 2801567981, 'lat': 48.1213651, 'lon': 11.5440702, 'tags': {'addr:housenumber': '5', 'addr:street': 'Daiserstraße', 'name': 'Hollerbusch', 'organic': 'only', 'phone': '+49 89 776474', 'shop': 'supermarket', 'website': 'http://www.bionelle.de/'}}, {'type': 'node', 'id': 2896580642, 'lat': 48.1230339, 'lon': 11.5779062, 'tags': {'addr:city': 'München', 'addr:housenumber': '16', 'addr:postcode': '81541', 'addr:street': 'Schlotthauerstraße', 'name': 'Naturwaren Entenbach', 'opening_hours': 'Mo-Fr 09:00-19:00; Sa 09:00-18:00', 'organic': 'only', 'phone': '+49 (0) 89 62232389', 'shop': 'supermarket', 'source': 'https://www.biomarkt.de/7093_Biomarkt_Entenbach_Naturkost.html [aufgerufen am 16.1.2018]', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 2954038036, 'lat': 48.0940311, 'lon': 11.5081933, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '243a', 'addr:postcode': '81379', 'addr:street': 'Kistlerhofstraße', 'brand': 'Alnatura', 'name': 'Alnatura', 'opening_hours': 'Mo-Sa 08:00-20:00; PH off', 'organic': 'only', 'shop': 'supermarket', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 3175793179, 'lat': 48.1313312, 'lon': 11.5681197, 'tags': {'addr:city': 'München', 'addr:housenumber': '45', 'addr:postcode': '80469', 'addr:street': 'Müllerstraße', 'name': 'Basic Biomarkt', 'opening_hours': 'Mo-Sa 08:00-20:00', 'organic': 'only', 'shop': 'supermarket', 'toilets:wheelchair': 'no', 'website': 'http://www.basicbio.de/', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 3212479244, 'lat': 48.1275799, 'lon': 11.5548448, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '117', 'addr:postcode': '80337', 'addr:street': 'Lindwurmstraße', 'name': 'Alnatura Bio Super Natur Markt', 'opening_hours': 'Mo-Sa 08:00-20:00', 'organic': 'only', 'phone': '+49 89 76701794', 'shop': 'supermarket', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 3247439446, 'lat': 48.0761432, 'lon': 11.517519, 'tags': {'addr:housenumber': '49', 'addr:street': 'Herterichstraße', 'name': 'Naturkost in Solln', 'opening_hours': 'Mo-Fr 09:00-18:00, Sa 09:00-12:00', 'organic': 'only', 'phone': '+49 89 7917720', 'shop': 'supermarket', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 3299174774, 'lat': 48.2032845, 'lon': 11.5877184, 'tags': {'name': 'Alnatura', 'opening_hours': 'Mo-Sa 08:00-20:00', 'organic': 'only', 'shop': 'supermarket'}}, {'type': 'node', 'id': 3385733095, 'lat': 48.1103009, 'lon': 11.5951857, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '2', 'addr:postcode': '81539', 'addr:street': 'Giesinger Bahnhofplatz', 'contact:email': 'info@denns.de', 'contact:fax': '+49 89 62000119', 'contact:phone': '+49 89 62000180', 'contact:website': 'http://www.denns-biomarkt.de/', 'name': "denn's Biomarkt", 'opening_hours': 'Mo-Fr 07:00-20:00; Sa 08:00-20:00', 'operator': "denn's Biomarkt GmbH", 'organic': 'only', 'shop': 'supermarket', 'source': 'survey', 'website': 'http://www.denns-biomarkt.de'}}, {'type': 'node', 'id': 3472761910, 'lat': 48.1341978, 'lon': 11.5959505, 'tags': {'name': 'Landhof Standl', 'organic': 'only', 'shop': 'convenience', 'toilets:wheelchair': 'no', 'wheelchair': 'limited', 'wheelchair:description': 'Man kann ggf. auch außen bedient werden'}}, {'type': 'node', 'id': 3625238058, 'lat': 48.156207, 'lon': 11.5312062, 'tags': {'addr:city': 'München', 'addr:housenumber': '187', 'addr:street': 'Nymphenburger Straße', 'ele': '0', 'name': 'Herrmannsdorfer Landwerkstätten', 'opening_hours': 'Mo-Fr 09:00-18:30; Sa 08:00-13:30', 'organic': 'only', 'phone': '+49 89 1679315', 'shop': 'butcher', 'website': 'http://www.herrmannsdorfer.de/wo-sie-uns-finden/die-geschaefte/', 'wikidata': 'Q1614299', 'wikipedia': 'de:Herrmannsdorfer Landwerkstätten'}}, {'type': 'node', 'id': 3627733005, 'lat': 48.1085111, 'lon': 11.6186477, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '38', 'addr:postcode': '81737', 'addr:street': 'Ottobrunner Straße', 'name': 'Casa Noastra Romaneasca', 'opening_hours': 'Mo-Fr 10:00-13:00, Sa 08:00-13:00, Mo-Fr 15:00-18:00', 'organic': 'only', 'shop': 'deli'}}, {'type': 'node', 'id': 3650935242, 'lat': 48.122581, 'lon': 11.6619378, 'tags': {'addr:city': 'München', 'addr:housenumber': '211', 'addr:postcode': '81825', 'addr:street': 'Kreillerstraße', 'name': "denn's Biomarkt", 'opening_hours': 'Mo-Sa 08:00-20:00', 'organic': 'only', 'phone': '+49 89 43573440', 'shop': 'supermarket'}}, {'type': 'node', 'id': 3767296317, 'lat': 48.1640754, 'lon': 11.6287886, 'tags': {'name': 'Viktualien Eck', 'organic': 'only', 'shop': 'supermarket'}}, {'type': 'node', 'id': 3929290129, 'lat': 48.1340036, 'lon': 11.5667336, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '10', 'addr:postcode': '80336', 'addr:street': 'Sendlinger-Tor-Platz', 'contact:email': 'info@vitaminbude.de', 'contact:fax': '+49 89 5454 4808', 'contact:phone': '+49 89 5454 4804', 'contact:website': 'www.vitaminbude.de/', 'level': '2', 'name': 'Die Vitaminbude', 'organic': 'only', 'shop': 'beauty', 'source': 'survey by BenE München'}}, {'type': 'node', 'id': 3929291581, 'lat': 48.131517, 'lon': 11.5676002, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '3', 'addr:postcode': '80469', 'addr:street': 'Pestalozzistraße', 'contact:phone': '+49 89 23249802 \u200e', 'contact:website': 'kraeutergarten-muenchen.de', 'name': 'Kräutergarten', 'organic': 'only', 'shop': 'tea', 'source': 'survey by BenE München'}}, {'type': 'node', 'id': 3964427826, 'lat': 48.1647282, 'lon': 11.5585926, 'tags': {'garden:type': 'community', 'identity': 'subsistence_economy', 'interaction': 'cousing', 'leisure': 'garden', 'name': 'Stadt Acker', 'organic': 'only', 'provides': 'food+drink'}}, {'type': 'node', 'id': 3964488765, 'lat': 48.1594157, 'lon': 11.5297866, 'tags': {'garden:type': 'community', 'identity': 'subsistence_economy', 'interaction': 'cousing', 'leisure': 'garden', 'name': 'Gärten der Kulturen', 'organic': 'only', 'provides': 'food+drink'}}, {'type': 'node', 'id': 3964766650, 'lat': 48.1530243, 'lon': 11.6350365, 'tags': {'garden:type': 'community', 'identity': 'subsistence_economy', 'interaction': 'cousing', 'leisure': 'garden', 'name': 'Wabengarten ÖBZ', 'organic': 'only', 'provides': 'food+drink'}}, {'type': 'node', 'id': 3964766651, 'lat': 48.153146, 'lon': 11.6341889, 'tags': {'garden:type': 'community', 'identity': 'permaculture', 'interaction': 'cousing', 'leisure': 'garden', 'name': 'Experimentiergarten NawaRo', 'organic': 'only', 'provides': 'energy'}}, {'type': 'node', 'id': 3964776014, 'lat': 48.1529349, 'lon': 11.6353047, 'tags': {'garden:type': 'community', 'identity': 'subsistence_economy', 'interaction': 'cousing', 'leisure': 'garden', 'name': 'Interkultureller Frauengarten ÖBZ', 'organic': 'only', 'provides': 'food+drink'}}, {'type': 'node', 'id': 3964792258, 'lat': 48.1226167, 'lon': 11.7039102, 'tags': {'garden:type': 'community', 'identity': 'subsistence_economy', 'interaction': 'cousing', 'leisure': 'garden', 'name': 'Krautgarten', 'organic': 'only', 'provides': 'food+drink'}}, {'type': 'node', 'id': 3964807233, 'lat': 48.1254187, 'lon': 11.6145404, 'tags': {'garden:type': 'community', 'identity': 'subsistence_economy', 'interaction': 'cousing', 'leisure': 'garden', 'name': 'bewohnergarten', 'organic': 'only', 'provides': 'food+drink'}}, {'type': 'node', 'id': 3964810758, 'lat': 48.1232071, 'lon': 11.6084716, 'tags': {'garden:type': 'community', 'identity': 'subsistence_economy', 'interaction': 'cousing', 'leisure': 'garden', 'name': 'Kulturgarten', 'operator': 'WERKBOX 3', 'organic': 'only', 'provides': 'food+drink'}}, {'type': 'node', 'id': 3964832970, 'lat': 48.130432, 'lon': 11.539921, 'tags': {'addr:city': 'München', 'addr:housenumber': '41', 'addr:postcode': '80339', 'addr:street': 'Ganghoferstraße', 'garden:type': 'community', 'identity': 'subsistence_economy', 'interaction': 'cousing', 'leisure': 'garden', 'name': 'Interkultureller Garten IG-Feuerwache', 'operator': 'Initiativgruppe', 'organic': 'only', 'provides': 'food+drink', 'source': 'http://www.initiativgruppe.de/'}}, {'type': 'node', 'id': 3964843353, 'lat': 48.1279219, 'lon': 11.4762993, 'tags': {'garden:type': 'community', 'identity': 'subsistence_economy', 'interaction': 'cousing', 'leisure': 'garden', 'name': 'Interkultureller Garten', 'organic': 'only', 'provides': 'food+drink'}}, {'type': 'node', 'id': 3964877597, 'lat': 48.1129985, 'lon': 11.6150688, 'tags': {'garden:type': 'community', 'identity': 'subsistence_economy', 'interaction': 'cousing', 'leisure': 'garden', 'name': 'Rosen_heim', 'organic': 'only', 'provides': 'food+drink'}}, {'type': 'node', 'id': 3964882772, 'lat': 48.0954515, 'lon': 11.6626496, 'tags': {'garden:type': 'community', 'identity': 'subsistence_economy', 'interaction': 'cousing', 'leisure': 'garden', 'name': 'Bewohnergarten ZAK', 'organic': 'only', 'provides': 'food+drink'}}, {'type': 'node', 'id': 4232120417, 'lat': 48.0954712, 'lon': 11.562995, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '190', 'addr:postcode': '81545', 'addr:street': 'Grünwalder Straße', 'name': "denn's Biomarkt", 'opening_hours': 'Mo-Sa 08:00-20:00', 'organic': 'only', 'phone': '+49 89 96990849', 'shop': 'supermarket', 'website': 'http://www.denns-biomarkt.de', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 4251078609, 'lat': 48.1692171, 'lon': 11.5939465, 'tags': {'name': 'K.O. Back-Kollektiv', 'organic': 'only', 'shop': 'convenience'}}, {'type': 'node', 'id': 4251078610, 'lat': 48.1691971, 'lon': 11.593948, 'tags': {'name': 'Vollwert Bäckerei', 'organic': 'only', 'shop': 'bakery'}}, {'type': 'node', 'id': 4410612036, 'lat': 48.1489155, 'lon': 11.5748652, 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '27', 'addr:postcode': '80799', 'addr:street': 'Türkenstraße', 'email': 'info@vollcorner.de', 'name': 'VollCorner', 'opening_hours': 'Mo-Sa 08:00-20:00', 'operator': 'VollCorner Biomarkt GmbH', 'organic': 'only', 'phone': '+49 89 41220433', 'shop': 'supermarket', 'website': 'http://www.vollcorner.de', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 4452947672, 'lat': 48.1454328, 'lon': 11.5603596, 'tags': {'FIXME': 'Bitte noch payment, wheelchair, diaper, internet_access … eintragen.', 'amenity': 'restaurant', 'contact:facebook': 'https://de-de.facebook.com/delikitchentm/', 'diet:vegan': 'only', 'fair_trade': 'only', 'name': 'Deli kitchen', 'opening_hours': 'Mo-Fr 10:00-17:00; PH off', 'organic': 'only'}}, {'type': 'node', 'id': 4872052777, 'lat': 48.1371553, 'lon': 11.6156806, 'tags': {'addr:city': 'München', 'addr:housenumber': '163', 'addr:postcode': '81677', 'addr:street': 'Einsteinstraße', 'name': 'Hanf', 'organic': 'only', 'shop': 'convenience', 'wheelchair': 'no'}}, {'type': 'node', 'id': 5020732635, 'lat': 48.1398442, 'lon': 11.5630217, 'tags': {'name': 'Vitalia Reformhaus', 'organic': 'only', 'shop': 'convenience', 'toilets:wheelchair': 'no', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 5184622991, 'lat': 48.1791211, 'lon': 11.5057595, 'tags': {'name': "denn's Biomarkt", 'organic': 'only', 'shop': 'supermarket'}}, {'type': 'node', 'id': 5196435321, 'lat': 48.1125289, 'lon': 11.549327, 'tags': {'addr:city': 'München', 'addr:housenumber': '1', 'addr:postcode': '81371', 'addr:street': 'Resi-Huber-Platz', 'email': 'info@vollcorner.de', 'name': 'VollCorner Bio', 'opening_hours': 'Mo-Sa 08:00-20:00', 'operator': 'VollCorner Biomarkt GmbH;Birgit Neumann und Willi Pfaff', 'organic': 'only', 'payment:cash': 'yes', 'payment:debit_cards': 'yes', 'phone': '+49 89 55285111', 'shop': 'supermarket', 'wheelchair': 'yes'}}, {'type': 'node', 'id': 5573269777, 'lat': 48.1351862, 'lon': 11.5793079, 'tags': {'addr:housenumber': '35', 'addr:street': 'Westenriederstraße', 'amenity': 'restaurant', 'cuisine': 'international;organic;vietnamese', 'delivery': 'yes', 'level': '1', 'name': 'Byoo', 'opening_hours': 'Mo-Sa 11-19', 'organic': 'only', 'outdoor_seating': 'no', 'self_service': 'only', 'smoking': 'no', 'takeaway': 'yes'}}, {'type': 'node', 'id': 5582174921, 'lat': 48.1126527, 'lon': 11.5494029, 'tags': {'addr:city': 'München', 'addr:housenumber': '1', 'addr:postcode': '81379', 'addr:street': 'Resi Huber Platz', 'amenity': 'restaurant', 'name': 'ResiHuber', 'operator': 'Birgit & Willi', 'organic': 'only', 'phone': '089 45201670', 'toilets:wheelchair': 'yes', 'wheelchair': 'yes', 'wheelchair:description': 'Rollstuhleingang durch die Passage im Hinterhof erreichbar'}}, {'type': 'node', 'id': 5628749992, 'lat': 48.1506437, 'lon': 11.576034, 'tags': {'addr:housenumber': '53', 'addr:street': 'Türkenstr.', 'amenity': 'ice_cream', 'name': 'Bartu', 'opening_hours': 'Mo-Su 11:00-22:00', 'organic': 'only', 'website': 'http://www.bartu-bioeismanufaktur.de/'}}, {'type': 'node', 'id': 5695922422, 'lat': 48.1166566, 'lon': 11.5763458, 'tags': {'addr:city': 'München', 'addr:housenumber': '11', 'addr:postcode': '81543', 'addr:street': 'Lohstraße', 'description': 'preigünstige Bio-Weine, Weinprobe nach Vereinbarung, Eingang im Hof (in der Tonerei)', 'name': 'Bio-Wein-Depot', 'opening_hours': 'Mo-Th 09:00-17:00, Fr 09:00-13:00', 'operator': 'Gerhard Schweitzer', 'organic': 'only', 'phone': '+49 89 625 00  01', 'shop': 'supermarket'}}, {'type': 'way', 'id': 60979164, 'center': {'lat': 48.191289, 'lon': 11.4628565}, 'nodes': [763406427, 763406440, 763406434, 2809575854, 763406445, 2809575840, 763406427], 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housename': 'BioMaxx', 'addr:housenumber': '41', 'addr:postcode': '80999', 'addr:street': 'Franz-Nißl-Straße', 'building': 'yes', 'name': 'VollCorner Biomarkt', 'opening_hours': 'Mo-Sa 8:00-20:00', 'organic': 'only', 'phone': '+49 89 54316488', 'shop': 'supermarket', 'website': 'http://www.vollcorner.de'}}, {'type': 'way', 'id': 112382688, 'center': {'lat': 48.1670797, 'lon': 11.5858901}, 'nodes': [1277427338, 1324415642, 1277427311, 1277427308, 1277427314, 1277427318, 345849090, 1277427320, 1277427338], 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '1', 'addr:postcode': '80802', 'addr:street': 'Rheinstraße', 'building': 'yes', 'building:levels': '6', 'name': 'Basic', 'opening_hours': 'Mo-Sa 08:00-20:00', 'organic': 'only', 'shop': 'supermarket', 'wheelchair': 'yes'}}, {'type': 'way', 'id': 117372544, 'center': {'lat': 48.1650631, 'lon': 11.4906546}, 'nodes': [1322044471, 1322044335, 1322045111, 1322045923, 1322045544, 1322044471], 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '6', 'addr:postcode': '81247', 'addr:street': 'Amalienburgstraße', 'building': 'yes', 'name': 'Basic Bio', 'opening_hours': 'Mo-Sa 08:00-20:00; Ph off', 'organic': 'only', 'payment:american_express': 'yes', 'payment:girocard': 'yes', 'payment:mastercard': 'yes', 'payment:visa': 'yes', 'shop': 'supermarket', 'website': 'https://basicbio.de/de-DE/Maerkte', 'wheelchair': 'yes'}}, {'type': 'way', 'id': 124842508, 'center': {'lat': 48.1788278, 'lon': 11.5754537}, 'nodes': [1388232463, 1388232483, 1388232482, 1388232462, 1388232463], 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '4', 'addr:street': 'Ricarda-Huch-Straße', 'garden:type': 'community', 'identity': 'subsistence_economy', 'interaction': 'cousing', 'leisure': 'garden', 'name': 'Generationengarten', 'organic': 'only', 'provides': 'food+drink', 'url': 'http://www.verein-stadtteilarbeit.de/index.php?option=com_content&view=article&id=38&Itemid=20'}}, {'type': 'way', 'id': 217668781, 'center': {'lat': 48.0769433, 'lon': 11.5035048}, 'nodes': [2269815052, 2269815050, 2269815049, 2868911074, 2269815051, 2269815052], 'tags': {'garden:type': 'community', 'identity': 'subsistence_economy', 'interaction': 'cousing', 'leisure': 'garden', 'name': 'Sonnengarten Solln', 'organic': 'only', 'provides': 'food+drink', 'topic': 'food+drink', 'website': 'http://www.sonnengarten-solln.de/'}}, {'type': 'way', 'id': 248315682, 'center': {'lat': 48.1486158, 'lon': 11.5356363}, 'nodes': [2551133810, 2551133820, 1108827269, 1108827249, 1108827248, 2551133800, 2551133794, 2551133789, 2551133784, 1108827257, 2551133810], 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '42', 'addr:postcode': '80634', 'addr:street': 'Schulstraße', 'amenity': 'restaurant', 'building': 'yes', 'building:levels': '4', 'building:type': 'apartments', 'contact:website': 'http://pizza-zodiac.com/zodiac-munchen/', 'currency:EUR': 'yes', 'currency:others': 'no', 'diet:gluten_free': 'no', 'diet:vegan': 'yes', 'diet:vegetarian': 'only', 'fair_trade': 'no', 'name': 'Zodiac', 'opening_hours': 'Mo-Sa 11:30-22:00; PH,Su 15:00-22:00', 'organic': 'only', 'start_date': '2016'}}, {'type': 'way', 'id': 264530274, 'center': {'lat': 48.0917271, 'lon': 11.5616034}, 'nodes': [2701946797, 2701946796, 2887426479, 2701946801, 2701946809, 2701946797], 'tags': {'addr:city': 'München', 'addr:country': 'DE', 'addr:housenumber': '8', 'addr:postcode': '81545', 'addr:street': 'Authariplatz', 'building': 'commercial', 'building:levels': '2', 'fax': '+49 89 89054657', 'name': 'Biowelt Harlaching', 'opening_hours': 'Mo-Sa 08:00-20:00', 'organic': 'only', 'phone': '+49 89 89054656', 'roof:levels': '1', 'roof:shape': 'hipped', 'shop': 'supermarket', 'website': 'http://www.bioweltmarkt.de/'}}, {'type': 'way', 'id': 271129794, 'center': {'lat': 48.1386076, 'lon': 11.5655294}, 'nodes': [2760922698, 2760922700, 2760922705, 2760922701, 2760922697, 2760922698], 'tags': {'indoor': 'yes', 'layer': '-1', 'level': '-1', 'name': 'Vitalia Reformhaus', 'opening_hours': 'Mo-Sa 09:30-20:00', 'organic': 'only', 'phone': '+49 89 54885941', 'shop': 'convenience', 'toilets:wheelchair': 'no', 'wheelchair': 'yes'}}, {'type': 'way', 'id': 279754721, 'center': {'lat': 48.1273579, 'lon': 11.6041}, 'nodes': [2839524675, 2839524670, 2839524668, 2839524674, 2839524675], 'tags': {'building:part': 'yes', 'indoor': 'yes', 'layer': '-1', 'level': '-1', 'name': 'Hofpfisterei', 'organic': 'only', 'shop': 'bakery', 'wheelchair': 'yes', 'wheelchair:description': 'Rampe am Eingang'}}, {'type': 'way', 'id': 279754736, 'center': {'lat': 48.1274032, 'lon': 11.6040354}, 'nodes': [3258103474, 2839524672, 2839524670, 2839524675, 3258103474], 'tags': {'building:part': 'yes', 'indoor': 'yes', 'layer': '-1', 'level': '-1', 'name': 'Vitalia Reformhaus', 'organic': 'only', 'shop': 'convenience', 'wheelchair': 'limited'}}, {'type': 'way', 'id': 305302565, 'center': {'lat': 48.1134227, 'lon': 11.5770443}, 'nodes': [3076557147, 3099090224, 3099090223, 1248593378, 1248593634, 1248593332, 1825146147, 3076557147], 'tags': {'garden:type': 'community', 'identity': 'subsistence_economy', 'interaction': 'cousing', 'leisure': 'garden', 'name': 'Giesinger Grünspitz', 'organic': 'only', 'provides': 'food+drink', 'wheelchair': 'limited'}}, {'type': 'way', 'id': 349183939, 'center': {'lat': 48.1411625, 'lon': 11.5611409}, 'nodes': [3551023416, 3551023420, 3551023439, 3551023434, 3343358602, 3551023416], 'tags': {'building:part': 'yes', 'layer': '-1', 'level': '-1', 'name': 'biokultur', 'opening_hours': 'Mo-Sa 07:00-21:00; Su 08:00-21:00', 'organic': 'only', 'shop': 'supermarket', 'wheelchair': 'yes'}}, {'type': 'way', 'id': 482918455, 'center': {'lat': 48.1516026, 'lon': 11.4287001}, 'nodes': [277039468, 4756948774, 4756948773, 4756948772, 277039468], 'tags': {'crop': 'vegetable', 'garden:type': 'community', 'identity': 'subsistence_economy', 'interaction': 'cousing', 'landuse': 'farmland', 'leisure': 'garden', 'name': 'Treffpunkt Garten', 'organic': 'only', 'provides': 'food+drink', 'source': 'http://www.sos-kinderdorf.de/familien-und-kindertageszentrum-neuaubing'}}, {'type': 'way', 'id': 551393522, 'center': {'lat': 48.1466064, 'lon': 11.4638574}, 'nodes': [2168124777, 2148289031, 2148289028, 5325117009, 5325117012, 5325117011, 5325117010, 2168124777], 'tags': {'addr:housenumber': '480-482', 'addr:postcode': '81241', 'addr:street': 'Landsberger Straße', 'diet:gluten_free': 'yes', 'diet:vegan': 'yes', 'level': '0', 'name': 'Alnatura', 'opening_hours': 'Mo-Sa 08:00-20:00; PH off', 'organic': 'only', 'payment:cash': 'yes', 'shop': 'supermarket', 'wheelchair': 'yes'}}], "success"]
        """

        # DB Ingest <Ende vom Modul Miner>
        query_feedback_POI = query_feedback[3]



        #Erzeugen eines POI_Ingest Object instanz je POI Element
        for x in range (0,1): #len(query_feedback_POI)
            new_POI_ingest = []
            timestamp_ingest_start = time.now()

            #Instanz erzeugen
            new_POI_ingest = DB_ingest.POI_Ingest()

            #Data Processing
            new_POI_ingest.process_data_OSM(query_keywords[i], query_feedback_POI[x],query_feedback[0],query_feedback[1])

            print(new_POI_ingest.timestamp, new_POI_ingest.city, new_POI_ingest.name, new_POI_ingest.lat, new_POI_ingest.lon, new_POI_ingest.type, new_POI_ingest.cat, new_POI_ingest.postcode, new_POI_ingest.opening_hours)

            #Data Filtering
            #Check ob sich der Eintrag schon in der Datenbankbefindet hinzüfgen
            new_POI_ingest.data_check()

            #Ingest von neuen Daten
            #new_POI_ingest.ingest_data()
            timestamp_ingest_fin = time.now()
        # hier noch erfolgreichen Ingest in Log File ergänzen, dann ist Miner final
        if query_feedback[4] == "success":
            log_type = "success"
            dir = os.path.dirname(os.path.realpath(__file__))
            logfile.writelog(log_type, dir, query_feedback[0], query_feedback[1], query_keywords[i], timestamp_ingest_start, timestamp_ingest_fin, "" + str(query_feedback[2]) + " Items fetched. Starting Ingest...")
            return_value = "OSM Miner: success."
            return return_value
        elif query_feedback[4] == "err":
            log_type = "err"
            dir = os.path.dirname(os.path.realpath(__file__))
            logfile.writelog(log_type, dir, query_feedback[0], query_feedback[1], query_keywords[i], timestamp_ingest_start, timestamp_ingest_fin, "no data fetched or ingested")
            return_value = "OSM Miner: error. See log file."
            return return_value
        else:
            log_type = "err"
            dir = os.path.dirname(os.path.realpath(__file__))
            logfile.writelog(log_type, dir, query_feedback[0], query_feedback[1], query_keywords[i], timestamp_ingest_start, timestamp_ingest_fin, "something gone really wrong")
            return_value = "OSM Miner: fatal error. See log file."
            return return_value